var uv={};uv.Graph=function(){var a=this;return a.id=uv.util.getUniqueId(),a.graphdef=null,a.config=null,a.frame=null,a.panel=null,a.bg=null,a.effects={},a.axes={hor:{group:null,scale:null,func:null,axis:null,line:null,label:null},ver:{group:null,scale:null,func:null,axis:null,line:null,label:null}},a.labels=null,a.categories=null,this},uv.Graph.prototype.init=function(a,b){var c=this;return c.graphdef=a,c.config=$.extend(!0,{},uv.config,b),c.max(c.graphdef.stepup).position(c.config.meta.position||"body").setDimensions().setFrame().setPanel().setBackground().setCaption().setSubCaption().setMetadata().setHorizontalAxis().setVerticalAxis().setEffectsObject().setDownloadOptions(),c},uv.Graph.prototype.setDimensions=function(){var a=this;return a.height(a.config.dimension.height).width(a.config.dimension.width).top(a.config.margin.top).bottom(a.config.margin.bottom).left(a.config.margin.left).right(a.config.margin.right),this},uv.Graph.prototype.setDownloadOptions=function(){var a=this;a.download=a.panel.append("g").classed(uv.constants.classes.download,!0),a.download.append("text").classed(uv.constants.classes.download,!0).text(uv.constants.downloads.downloadLabel).attr("y",-a.config.margin.top/2).attr("x",a.config.dimension.width-25).attr("text-anchor",a.config.caption.textanchor).style("font-family",a.config.caption.fontfamily).style("font-size","12").style("cursor",a.config.caption.cursor).style("stroke",a.config.caption.stroke).style("text-decoration","underline").on("mouseover",function(){var a=d3.select(this);a.style("color","#0000FF")}).on("mouseout",function(){var a=d3.select(this);a.style("color","#8D8D8D")}).on("click",function(){var b=d3.select(this);b.style("display","none"),uv.util.svgToPng(a,function(){b.style("display",null)})})},uv.Graph.prototype.setFrame=function(){var a=this;return a.frame||(a.frame=d3.select(a.position()||"body").append("div").style("display","inline-block").append("svg")),a.frame.attr("id",uv.constants.classes.uv+"-"+a.id).classed(uv.constants.classes.frame,!0).attr("width",a.width()+a.left()+a.right()).attr("height",a.height()+a.top()+a.bottom()),a.frame.append("rect").classed(uv.constants.classes.framebg,!0).attr("width",a.width()+a.left()+a.right()).attr("height",a.height()+a.top()+a.bottom()).style("fill",a.config.frame.bgcolor),this},uv.Graph.prototype.setPanel=function(){var a=this;return a.panel||(a.panel=a.frame.append("g")),a.panel.attr("id",uv.constants.classes.panel+"-"+a.id).classed(uv.constants.classes.panel,!0).attr("transform","translate("+a.left()+","+a.top()+")"),this},uv.Graph.prototype.setBackground=function(a){var b=this;return b.bg||(b.bg=b.panel.append("rect").classed(uv.constants.classes.bg,!0).attr("height",b.height()).attr("width",b.width())),b.bg.style("fill",a||b.config.graph.background),this},uv.Graph.prototype.setCaption=function(){var a=this;return a.caption=a.panel.append("g").classed(uv.constants.classes.caption,!0),a.caption.append("text").classed(uv.constants.classes.captiontext,!0).text(a.config.meta.caption).attr("y",-a.config.margin.top/2).attr("x",a.config.dimension.width/2).attr("text-anchor",a.config.caption.textanchor).style("font-family",a.config.caption.fontfamily).style("font-size",a.config.caption.fontsize).style("font-weight",a.config.caption.fontweight).style("font-variant",a.config.caption.fontvariant).style("text-decoration",a.config.caption.textdecoration).on("mouseover",uv.effects.caption.mouseover(a.config)).on("mouseout",uv.effects.caption.mouseout(a.config)),this},uv.Graph.prototype.setSubCaption=function(){var a=this;return a.subCaption=a.panel.append("g").classed(uv.constants.classes.subcaption,!0),a.subCaption.append("text").classed(uv.constants.classes.subcaptiontext,!0).text(a.config.meta.subcaption).attr("y",-a.config.margin.top/2+1*a.config.caption.fontsize).attr("x",a.config.dimension.width/2).attr("text-anchor",a.config.caption.textanchor).style("font-family",a.config.subCaption.fontfamily).style("font-size",a.config.subCaption.fontsize).style("font-weight",a.config.subCaption.fontweight).style("font-variant",a.config.subCaption.fontvariant).style("text-decoration",a.config.subCaption.textdecoration),this},uv.Graph.prototype.setMetadata=function(){var a=this;return a.labels=uv.util.getLabelArray(a.graphdef),a.categories=uv.util.getCategoryArray(a.graphdef),this},uv.Graph.prototype.setHorizontalAxis=function(){var a=this;return a.graphdef,a.axes.hor.group||(a.axes.hor.group=a.panel.append("g").classed(uv.constants.classes.horaxis,!0).attr("transform","translate(0,"+a.height()+")").style("shape-rendering","crispEdges")),"Horizontal"===a.config.graph.orientation?(a.axes.hor.scale=d3.scale[a.config.scale.type]().domain(["log"===a.config.scale.type?1:0,a.max()]).range([0,a.width()]),a.axes.hor.scale.nice&&a.axes.hor.scale.nice(),a.axes.hor.func=d3.svg.axis().scale(a.axes.hor.scale).ticks(a.config.axis.ticks).tickSize(-a.width(),a.config.axis.minor,0).tickPadding(a.config.axis.padding).tickSubdivide(a.config.axis.subticks).orient("bottom")):(a.axes.hor.scale=d3.scale.ordinal().rangeRoundBands([0,a.width()],a.config.scale.ordinality),a.axes.hor.func=d3.svg.axis().scale(a.axes.hor.scale).tickPadding(a.config.axis.padding).orient("bottom")),this},uv.Graph.prototype.setVerticalAxis=function(){var a=this;return a.graphdef,a.axes.ver.group||(a.axes.ver.group=a.panel.append("g").classed(uv.constants.classes.veraxis,!0).style("shape-rendering","crispEdges")),"Vertical"===a.config.graph.orientation?(a.axes.ver.scale=d3.scale[a.config.scale.type]().domain([a.max(),"log"===a.config.scale.type?1:0]).range([0,a.height()]),a.axes.ver.scale.nice&&a.axes.ver.scale.nice(),a.axes.ver.func=d3.svg.axis().scale(a.axes.ver.scale).ticks(a.config.axis.ticks).tickSize(-a.width(),a.config.axis.minor,0).tickPadding(a.config.axis.padding).tickSubdivide(a.config.axis.subticks).orient("left")):(a.axes.ver.scale=d3.scale.ordinal().rangeRoundBands([0,a.width()],a.config.scale.ordinality),a.axes.ver.func=d3.svg.axis().scale(a.axes.ver.scale).tickPadding(a.config.axis.padding).orient("left")),this},uv.Graph.prototype.setEffectsObject=function(){for(var a=this,b=0;b<a.categories.length;b++)a.effects[a.categories[b]]={};return a},uv.Graph.prototype.drawHorizontalAxis=function(){var a=this;return a.axes.hor.axis=a.axes.hor.group.append("g").style("font-family",a.config.label.fontfamily).style("font-size",a.config.label.fontsize).style("font-weight",a.config.label.fontweight).call(a.axes.hor.func),a.axes.hor.axis.selectAll("line").style("stroke",a.config.axis.strokecolor),a.axes.hor.axis.selectAll("path").style("fill","none"),a.axes.hor.line=a.panel.append("line").classed(uv.constants.classes.horaxis,!0).attr("y1",a.height()).attr("y2",a.height()).attr("x1","0").attr("x2",a.width()).style("stroke",a.config.axis.strokecolor),a.axes.hor.label=a.axes.hor.group.append("g").classed(uv.constants.classes.axeslabelgroup,!0).attr("transform","translate("+a.width()/2+","+(1*a.config.margin.bottom/4+1*a.config.label.fontsize)+")"),a.axes.hor.label.append("text").attr("display","block").classed(uv.constants.classes.axeslabel,!0).classed("cal",!0).attr("text-anchor","middle").style("font-size",a.config.axis.fontsize).style("font-family",a.config.axis.fontfamily).text(a.config.meta.hlabel),a.axes.hor.label.append("text").attr("display","block").attr("y",1*a.config.axis.fontsize).attr(uv.constants.classes.axessublabel,!0).classed("casl",!0).attr("text-anchor","middle").style("font-size",a.config.axis.fontsize-2).style("font-family",a.config.axis.fontfamily).text(a.config.meta.hsublabel),this},uv.Graph.prototype.drawVerticalAxis=function(){var a=this;return a.axes.ver.axis=a.axes.ver.group.append("g").classed(uv.constants.classes.axes,!0).style("font-family",a.config.label.fontfamily).style("font-size",a.config.label.fontsize).style("font-weight",a.config.label.fontweight).call(a.axes.ver.func),a.axes.ver.axis.selectAll("line").style("stroke",a.config.axis.strokecolor),a.axes.ver.axis.selectAll("path").style("fill","none"),a.axes.ver.line=a.panel.append("line").classed(uv.constants.classes.veraxis,!0).attr("y1",0).attr("y2",a.height()).style("stroke",a.config.axis.strokecolor),a.axes.ver.label=a.axes.ver.group.append("g").attr("transform","translate("+-4*a.config.margin.left/5+","+a.height()/2+")rotate(270)"),a.axes.ver.label.append("text").classed(uv.constants.classes.axeslabel,!0).attr("text-anchor","middle").classed("cal",!0).style("font-family",a.config.axis.fontfamily).style("font-size",a.config.axis.fontsize).text(a.config.meta.vlabel),a.axes.ver.label.append("text").classed(uv.constants.classes.axessublabel,!0).attr("text-anchor","middle").attr("y",+a.config.axis.fontsize).classed("casl",!0).style("font-family",a.config.axis.fontfamily).style("font-size",a.config.axis.fontsize-2).text(a.config.meta.vsublabel),this},uv.Graph.prototype.setLegend=function(){var a=this,b=a.panel.append("g").classed(uv.constants.classes.legend,!0).attr("transform",function(){if("right"===a.config.legend.position)return"translate("+a.width()+", 10)";if("bottom"===a.config.legend.position){var b=a.height()+a.config.margin.bottom/2+Number(a.config.axis.fontsize);return"translate(0, "+b+")"}});return a.legends=b.selectAll("g").data(a.categories).enter().append("g").attr("transform",function(b,c){if("right"===a.config.legend.position)return"translate(10,"+10*(2*c-1)+")";if("bottom"===a.config.legend.position){var d=100*c-a.config.dimension.width*a.config.legend.legendstart,e=20*a.config.legend.legendstart;return d>=a.config.dimension.width&&(a.config.legend.legendstart=a.config.legend.legendstart+1,d=100*c-a.config.dimension.width*a.config.legend.legendstart,e=20*a.config.legend.legendstart),"translate("+d+","+e+")"}}).attr("class",function(b,c){return d3.select(this).attr("class")?d3.select(this).attr("class")+("cl_"+a.categories[c]):"cl_"+a.categories[c]}).attr("disabled","false").on("mouseover",function(b){a.effects[b].mouseover&&"function"==typeof a.effects[b].mouseover&&a.effects[b].mouseover()}).on("mouseout",function(b){a.effects[b].mouseout&&"function"==typeof a.effects[b].mouseout&&a.effects[b].mouseout()}).on("click",function(b,c){uv.effects.legend.click(c,this,a)}),a.legends.append("rect").classed(uv.constants.classes.legendsign,!0).attr("height",a.config.legend.symbolsize).attr("width",a.config.legend.symbolsize).style("fill",function(b,c){return uv.util.getColorBand(a.config,c)}).style("stroke","none"),a.legends.append("text").classed(uv.constants.classes.legendlabel,!0).text(function(b,c){return a.categories[c]}).attr("dx",a.config.legend.textmargin).attr("dy",".71em").attr("text-anchor","start").style("font-family",a.config.legend.fontfamily).style("font-size",a.config.legend.fontsize).style("font-weight",a.config.legend.fontweight),this},uv.Graph.prototype.finalize=function(){var a=this;return a.drawHorizontalAxis().drawVerticalAxis().setLegend(),console.log(a),this},uv.Graph.prototype.remove=function(){return this.frame.remove(),this},uv.Graph.prototype.removeCaption=function(){return this.caption.remove(),this},uv.Graph.prototype.removeLegend=function(){return this.legends[0]&&this.legends[0].parentNode.remove(),this},uv.Graph.prototype.removePanel=function(){return this.panel.remove(),this},uv.Graph.prototype.removeHorAxis=function(){return this.panel.selectAll("g."+uv.constants.classes.horaxis+" > *").remove(),this.panel.selectAll("line."+uv.constants.classes.horaxis).remove(),this},uv.Graph.prototype.removeVerAxis=function(){return this.panel.selectAll("g."+uv.constants.classes.veraxis+" > *").remove(),this.panel.selectAll("line."+uv.constants.classes.veraxis).remove(),this},uv.Graph.prototype.width=function(a){return a?(this.config.dimension.width=a,this):this.config.dimension.width},uv.Graph.prototype.height=function(a){return a?(this.config.dimension.height=a,this):this.config.dimension.height},uv.Graph.prototype.top=function(a){return a?(this.config.margin.top=a,this):this.config.margin.top},uv.Graph.prototype.bottom=function(a){return a?(this.config.margin.bottom=a,this):this.config.margin.bottom},uv.Graph.prototype.left=function(a){return a?(this.config.margin.left=a,this):this.config.margin.left},uv.Graph.prototype.right=function(a){return a?(this.config.margin.right=a,this):this.config.margin.right},uv.Graph.prototype.position=function(a){return a?(this.config.meta.position=a,this):this.config.meta.position},uv.Graph.prototype.caption=function(a){return a?(this.config.meta.caption=a,this):this.config.meta.caption},uv.Graph.prototype.subCaption=function(a){return a?(this.config.meta.subCaption=a,this):this.config.meta.caption},uv.Graph.prototype.isDownload=function(a){return a?(this.config.meta.isDownload=a,this):this.config.meta.isDownload},uv.Graph.prototype.max=function(a){return a===!0?(this.config.graph.max=uv.util.getStepMaxValue(this.graphdef),this):a===!1?(this.config.graph.max=uv.util.getMaxValue(this.graphdef),this):"percent"===a?(this.config.graph.max=100,this):"waterfall"===a?(this.config.graph.max=uv.util.getWaterfallMaxValue(this.graphdef),this):this.config.graph.max},uv.Graph.prototype.toggleGraphGroup=function(a){var b=this,c=b.categories[a],d=b.frame.select("g.cge-"+uv.util.formatClassName(c)).style("display");return uv.util.getColorBand(b.config,a),b.frame.selectAll("g.cge-"+uv.util.formatClassName(c)).style("display","none"===d?null:"none"),this},uv.util={},uv.util.extend=function(a){function b(){}return b.prototype=a.prototype||a,new b},uv.util.getUniqueId=function(){return(new Date).getTime()},uv.util.getMaxValue=function(a){return d3.max(a.categories.map(function(b){return d3.max(a.dataset[b].map(function(a){return a.value}))}))},uv.util.getStepMaxValue=function(a){var b=a.dataset[a.categories[0]].map(function(){return 0});return a.categories.map(function(c){a.dataset[c].map(function(a,c){b[c]+=a.value})}),d3.max(b)},uv.util.getWaterfallMaxValue=function(a){var b=a.categories.map(function(){return 0});return a.categories.map(function(c,d){var e=0;a.dataset[c].map(function(a){e+=a.value,b[d]<e&&(b[d]=e)})}),d3.max(b)},uv.util.getSumUpArray=function(a){var b=a.dataset[a.categories[0]].map(function(){return 0});return a.categories.map(function(c){a.dataset[c].map(function(a,c){b[c]+=a.value})}),b},uv.util.getPercentage=function(a,b){return 100*a/b},uv.util.getDataArray=function(a){return a.categories.map(function(b){return a.dataset[b]})},uv.util.getTabularArray=function(a){var b,c,d,e,f=[],g=[];for(b=0,e=a.dataset[a.categories[0]].length;e>b;b+=1){for(g=[],g.push(a.dataset[a.categories[0]][b].name),c=0,d=a.categories.length;d>c;c+=1)g.push(a.dataset[a.categories[c]][b].value);f.push(g)}return f},uv.util.getLabelArray=function(a){return a.dataset[a.categories[0]].map(function(a){return a.name})},uv.util.getCategoryArray=function(a){return a.categories.map(function(a){return a})},uv.util.getCategoryData=function(a,b){return b.map(function(b){return a.dataset[b].map(function(a){return a.value})})},uv.util.transposeData=function(a){var b,c,d,e,f,g,h,i={},j=a.dataset[a.categories[0]].map(function(a){return a.name});for(b=0,d=j.length;d>b;b+=1)i[j[b]]=[];for(b=0,d=a.categories.length;d>b;b+=1)for(f=a.categories[b],c=0,e=a.dataset[f].length;e>c;c+=1)g=a.dataset[f][c].name,h=a.dataset[f][c].value,i[g].push({name:f,value:h});a.categories=j,a.dataset=i},uv.util.getPascalCasedName=function(a){return a.substring(0,1).toUpperCase()+a.substring(1)},uv.util.getColorBand=function(a,b){var c=uv.palette[a.graph.palette].length;return uv.palette[a.graph.palette][b%c]},uv.util.formatClassName=function(a){var b=a.trim().replace(/[^A-Za-z0-9_\-]/g,"-").toLowerCase();return b},uv.util.svgToPng=function(a,b){var c=d3.select(a.frame.node().parentNode).html(),d=document.createElement("canvas"),e=d.getContext("2d"),f=a.width()+a.left()+a.right(),g=a.width()+a.top()+a.bottom();d.setAttribute("width",f),d.setAttribute("height",g),e.drawSvg(c),d.toBlob(function(a){saveAs(a,"png_download"+Math.ceil(1e5*Math.random())+".png")},"image/png"),b.call()},uv.util.isCanvasSupported=function(){var a=document.createElement("canvas");return!(!a.getContext||!a.getContext("2d"))},uv.util.endAll=function(a,b){var c=0;a.each(function(){++c}).each("end",function(){--c||b.apply(this,arguments)})},uv.config={graph:{palette:"Brink",background:"#FFFFFF",orientation:"Horizontal",max:0},meta:{position:".uv_div",caption:"Usage of browsers by the years",subcaption:"Among major vendors",hlabel:"Horizontal Axis Label",vlabel:"Vertical Axis Label",hsublabel:"h sublabel",vsublabel:"v sublabel",isDownload:!0},dimension:{width:400,height:400},margin:{top:50,bottom:150,left:100,right:100},frame:{bgcolor:"#FFFFFF"},axis:{ticks:8,subticks:2,padding:5,minor:-10,strokecolor:"#000000",fontfamily:"Arial",fontsize:"14",fontweight:"bold"},label:{fontfamily:"Arial",fontsize:"11",fontweight:"normal",strokecolor:"#000000",showlabel:!1},scale:{type:"linear",ordinality:.2},bar:{strokecolor:"none",fontfamily:"Arial",fontsize:"10",fontweight:"bold",textcolor:"#000"},line:{interpolation:"linear"},area:{interpolation:"cardinal",offset:"zero",opacity:.2},pie:{fontfamily:"Arial",fontsize:"14",fontweight:"normal",fontvariant:"small-caps",fontfill:"#FFFFFF",strokecolor:"none",strokewidth:2},donut:{fontfamily:"Arial",fontsize:"14",fontweight:"normal",fontvariant:"small-caps",fontfill:"#FFFFF",factor:.4,strokecolor:"none",strokewidth:2},caption:{fontfamily:"Arial",fontsize:"14",fontweight:"bold",fontvariant:"small-caps",textdecoration:"none",hovercolor:"#696969",textanchor:"middle",cursor:"pointer",stroke:"#0000FF"},subCaption:{fontfamily:"Arial",fontsize:"9",fontweight:"normal",fontvariant:"normal",textdecoration:"none",textanchor:"middle"},legend:{position:"bottom",fontfamily:"Arial",fontsize:"11",fontweight:"normal",textmargin:15,symbolsize:10,inactivecolor:"#DDD",legendstart:0},effects:{hovercolor:"#FF0000",strokecolor:"none",textcolor:"#000000",duration:800,hover:400,showhovertext:!1}},uv.constants={},uv.constants.graphdef={categories:["IE","Chrome","Opera","Safari"],dataset:{IE:[{name:"2001",value:60},{name:"2002",value:70},{name:"2003",value:80},{name:"2004",value:90},{name:"2005",value:20}],Chrome:[{name:"2001",value:10},{name:"2002",value:30},{name:"2003",value:50},{name:"2004",value:90},{name:"2005",value:70}],Firefox:[{name:"2001",value:50},{name:"2002",value:150},{name:"2003",value:20},{name:"2004",value:80},{name:"2005",value:40}],Opera:[{name:"2001",value:90},{name:"2002",value:60},{name:"2003",value:30},{name:"2004",value:10},{name:"2005",value:70}],Safari:[{name:"2001",value:30},{name:"2002",value:10},{name:"2003",value:60},{name:"2004",value:90},{name:"2005",value:40}]}},uv.constants.waterfallGraphdef={categories:["data"],dataset:{data:[{name:"2005 Actual",value:90},{name:"Price",value:15},{name:"Volume",value:21},{name:"Fixes",value:-37},{name:"Taxation",value:-43},{name:"Escalation",value:-40},{name:"Mix",value:46},{name:"Market Effect",value:91},{name:"Partners",value:61}]}},uv.constants.classes={uv:"uv",pos:"uv-div",frame:"uv-frame",panel:"uv-panel",bg:"uv-chart-bg",axes:"uv-axes",legend:"uv-legend",framebg:"uv-frame-bg",horaxis:"uv-hor-axis",veraxis:"uv-ver-axis",caption:"uv-caption",captiontext:"uv-caption-text",subcaption:"uv-subcaption",subcaptiontext:"uv-subcaption-text",axeslabelgroup:"uv-axes-lable-group",axeslabel:"uv-axes-label",axessublabel:"uv-axes-sub-label",legendsign:"uv-legend-sign",legendlabel:"uv-legend-label",hoverbg:"uv-hover-bg",arc:"uv-arc-",areapath:"uv-areapath-",linepath:"uv-linepath-",area:"uv-area-",line:"uv-line-",dot:"uv-dot",download:"download-options"},uv.constants.downloads={downloadLabel:"Download"},uv.types={},uv.addChart=function(a,b){uv.types[a]=b},uv.addChart("Bar","BarGraph"),uv.addChart("Line","LineGraph"),uv.addChart("StackedBar","StackedBarGraph"),uv.addChart("StepUpBar","StepUpBarGraph"),uv.addChart("Area","AreaGraph"),uv.addChart("StackedArea","StackedAreaGraph"),uv.addChart("PercentBar","PercentBarGraph"),uv.addChart("PercentArea","PercentAreaGraph"),uv.addChart("Pie","PieGraph"),uv.addChart("Donut","DonutGraph"),uv.addChart("Waterfall","WaterfallGraph"),uv.addChart("PolarArea","PolarAreaGraph"),uv.chart=function(a,b,c){return void 0!==uv.types[a]?new uv[uv.types[a]](b,c):void 0},uv.effects={},uv.effects.bar={},uv.effects.bar.mouseover=function(a,b){var c=a.config,d=a.categories[b],e=function(){a.frame.selectAll("rect.cr_"+uv.util.formatClassName(d)).transition().duration(c.effects.hover).style("fill",c.effects.hovercolor).style("stroke",c.effects.strokecolor),c.effects.showhovertext&&a.frame.selectAll("text.cr_"+uv.util.formatClassName(d)).transition().duration(c.effects.hover).style("fill",c.effects.textcolor).style("opacity",1)};return a.effects[d].mouseover=e,e},uv.effects.bar.mouseout=function(a,b,c){var d=a.config,e=a.categories[b],f=uv.util.getColorBand(a.config,b),g=c||uv.util.getColorBand(a.config,b),h=function(){a.frame.selectAll("rect.cr_"+uv.util.formatClassName(e)).transition().duration(d.effects.hover).style("fill",f).style("stroke","none"),a.frame.selectAll("text.cr_"+uv.util.formatClassName(e)).transition().duration(d.effects.hover).style("fill",a.config.label.showlabel?g:"none")};return a.effects[e].mouseout=h,h},uv.effects.area={},uv.effects.area.mouseover=function(a,b){var c=a.config,d=a.categories[b],e=function(){a.frame.selectAll(".cge-"+uv.util.formatClassName(d)).select("path."+uv.constants.classes.area+uv.util.formatClassName(d)).transition().duration(c.effects.hover).style("fill",c.effects.hovercolor)};return a.effects[d].mouseover=e,e},uv.effects.area.mouseout=function(a,b){var c=a.config,d=a.categories[b],e=function(){a.frame.selectAll(".cge-"+uv.util.formatClassName(d)).select("path."+uv.constants.classes.area+uv.util.formatClassName(d)),a.frame.selectAll(".cge-"+d).select("path."+uv.constants.classes.area+d).transition().duration(c.effects.hover).style("fill",uv.util.getColorBand(c,b))};return a.effects[d].mouseout=e,e},uv.effects.line={},uv.effects.line.mouseover=function(a,b){var c=a.config,d=a.categories[b],e=function(){a.frame.selectAll(".cge-"+uv.util.formatClassName(d)).selectAll("circle").transition().duration(c.effects.hover).style("fill",c.effects.hovercolor).style("fill-opacity",1).style("stroke",c.effects.hovercolor),a.frame.selectAll(".cge-"+uv.util.formatClassName(d)).select("path").transition().duration(c.effects.hover).style("stroke",c.effects.hovercolor),c.effects.showhovertext&&a.frame.selectAll(".cge-"+uv.util.formatClassName(d)).selectAll("text").transition().duration(c.effects.hover).style("fill",c.effects.textcolor)};return a.effects[d].mouseover=e,e},uv.effects.line.mouseout=function(a,b,c){var d=a.config,e=a.categories[b],f=c||uv.util.getColorBand(a.config,b),g=function(){a.frame.selectAll(".cge-"+uv.util.formatClassName(e)).selectAll("circle").transition().duration(d.effects.hover).style("fill",f).style("fill-opacity",.6).style("stroke",f),a.frame.selectAll(".cge-"+uv.util.formatClassName(e)).select("path").transition().duration(d.effects.hover).style("stroke",f),a.frame.selectAll(".cge-"+uv.util.formatClassName(e)).selectAll("text").transition().duration(d.effects.hover).style("fill",a.config.label.showlabel?f:"none")};return a.effects[e].mouseout=g,g},uv.effects.caption={},uv.effects.caption.mouseover=function(a){return function(){d3.select(this.parentNode.parentNode).select("."+uv.constants.classes.hoverbg).transition().duration(a.effects.duration).style("fill",a.caption.hovercolor)}},uv.effects.caption.mouseout=function(a){return function(){d3.select(this.parentNode.parentNode).select("."+uv.constants.classes.hoverbg).transition().duration(a.effects.duration).style("fill",a.graph.background)}},uv.effects.donut={},uv.effects.donut.mouseover=function(a,b,c){return function(d){var e={x:b.centroid(d)[0]/5,y:b.centroid(d)[1]/5};d3.select(this.parentNode).transition().duration(c.effects.duration).attr("transform","translate("+(a.x+e.x)+","+(a.y+e.y)+")")}},uv.effects.donut.mouseout=function(a,b){return function(){d3.select(this.parentNode).transition().duration(b.effects.duration).attr("transform","translate("+a.x+","+a.y+")")}},uv.effects.pie={},uv.effects.pie.mouseover=function(a,b,c){return function(d){var e={x:b.centroid(d)[0]/5,y:b.centroid(d)[1]/5};d3.select(this.parentNode).transition().duration(c.effects.duration).attr("transform","translate("+(a.x+e.x)+","+(a.y+e.y)+")")}},uv.effects.pie.mouseout=function(a,b){return function(){d3.select(this.parentNode).transition().duration(b.effects.duration).attr("transform","translate("+a.x+","+a.y+")")}},uv.effects.legend={},uv.effects.legend.mouseover=function(a,b){return a.effects.group[a.categories[b]].mouseover},uv.effects.legend.mouseout=function(a,b){return a.effects.group[a.categories[b]].mouseout},uv.effects.legend.click=function(a,b,c){var d="false"===d3.select(b).attr("disabled")?!1:!0;c.toggleGraphGroup(a),d3.select(b).select("rect").style("fill",d?uv.util.getColorBand(c.config,a):uv.config.legend.inactivecolor),d3.select(b).select("text").style("fill",d?null:uv.config.legend.inactivecolor),d3.select(b).attr("disabled",d?"false":"true")},uv.palette={Plain:["#1F77B4"],Simple:["#d42f3c","#85b1e6","#FD6D16","#dfe617"],RGB:["#bb2211","#2222bb","#22aa22","#9999aa","#223322"],Olive:["#B4AF91","#787746","#40411E","#32331D"],"Soil and Sky":["#928174","#AA9788","#BDE4E9","#A8E1E9","#90D1DA"],Candid:["#EADEA1","#808355","#4E493D","#3A301C","#3F7696"],Sulphide:["#949993","#615952","#343640","#A15026","#C7B091"],"New Moon":["#EEE6AB","#C5BC8E","#696758","#45484B","#36393B"],Nature:["#EEEFD8","#BECD8A","#73880A","#CCCC33","#E2EAA3"],Earth:["#862424","#D8D1B4","#B3AB8E","#F1F0E9","#353535"],Sea:["#334433","#6699aa","#88aaaa","#aacccc","#447799"],Lemon:["#eebb00","#ddaa00","#eecc00","#ffee11"],Water:["#2266bb","#3388dd","#55aaee","#bbddee","#113355"],Grass:["#00AF64","#36D729","#61D7A4","#007241"],Hash:["tomato","yellowgreen","midnightblue","lightseagreen","gold"],Soft:["#f1b2e1","#b1ddf3","#ffde89","#e3675c","#c2d985"],Brink:["#01243b","#5288d8","#9da7b2","#c5c5c5","#71c42b"],Bright:["#ef597b","#ff6d31","#73b66b","#ffcb18","#29a2c6"],Lint:["#667b99","#afbbd2","#ccd5e6","#e9eef6","#ff6637"]},uv.Test=function(){var a=this;a.categories=["fruits","browsers","distros","countries"],a.categoryData={fruits:["oranges","apples","mangoes","pears","berries","guava","pineapples","watermelons"],browsers:["firefox","safari","ie","chrome","opera","maxthon","midori","epiphany"],distros:["Linux Mint","Ubuntu","PCLinuxOS","Fedora","Rosa","OpenSUSE","Sabayon Linux"],countries:["U.S.A","U.K","India","China","Canada","Brazil","Pakistan","France","Spain","Australia"]},a.labels=["years","users","mood"],a.labelData={years:["2001","2002","2003","2004","2005","2006","2007","2008","2009","2010"],users:["infants","kids","teens","middleage","oldage"],mood:["happy","sad","excited","surprised","none","angry"]},a.init()},uv.Test.prototype.init=function(){var a=this,b=uv.Test.getRandomInteger(0,a.labels.length),c=uv.Test.getRandomInteger(0,a.categories.length),d=a.labels[b],e=a.categories[c],f=uv.Test.getRandomInteger(1,a.labelData[d].length+1),g=uv.Test.getRandomInteger(1,a.categoryData[e].length+1);a.categorySet=uv.Test.getRandomSet(a.categoryData[e],g),a.labelSet=uv.Test.getRandomSet(a.labelData[d],f)},uv.Test.getRandomSet=function(a,b){for(var c=[],d=[],e=0;e!==b;){var f=uv.Test.getRandomInteger(0,a.length);-1===c.indexOf(f)&&(d.push(a[f]),c.push(f),e+=1)}return d},uv.Test.prototype.getGraphDef=function(){var a=this,b={};return b.categories=a.categorySet,b.dataset=a.getDataset(),console.log(b),b},uv.Test.prototype.getDataset=function(){for(var a=this,b={},c=0,d=a.categorySet.length;d>c;c++){for(var e=[],f=a.categorySet[c],g=0,h=a.labelSet.length;h>g;g++)e.push(uv.Test.getDataElement(a.labelSet[g]));b[f]=e}return b},uv.Test.getDataElement=function(a){var b={};return b.name=a,b.value=uv.Test.getRandomInteger(1,1e3),b},uv.Test.getRandomValue=function(a,b){return Math.random()*(b-a+1)+a},uv.Test.getRandomDataset=function(a,b,c){for(var d=[],e=0;a>e;e++)d.push(uv.Test.getRandomValue(b,c))},uv.Test.getRandomInteger=function(a,b){return Math.floor(Math.random()*(b-a))+a},uv.Test.getRandomIntegers=function(a,b,c){for(var d=[],e=0;a>e;e++)d.push(uv.Test.getRandomInteger(b,c));return d},uv.AreaGraph=function(a,b){var c=this;uv.Graph.call(c).setDefaults(a,b).init(a,b),c.areagroups=[],c.dataset=uv.util.getDataArray(c.graphdef);var d,e,f,g,h=c.graphdef.dataset[c.graphdef.categories[0]];for(c.axes["Horizontal"===c.config.graph.orientation?"ver":"hor"].scale.domain(h.map(function(a){return a.name})),f=0,g=c.dataset.length;g>f;f+=1)e=c.panel.append("g").classed("cg-"+uv.util.formatClassName(c.categories[f]),!0).append("g").classed("cge-"+uv.util.formatClassName(c.categories[f]),!0).datum(c.dataset[f]),d={path:e,linefunc:void 0,areafunc:void 0,line:void 0,area:void 0},c["draw"+c.config.graph.orientation+"Area"](d,f),c.areagroups.push(d);c.finalize()},uv.AreaGraph.prototype=uv.util.extend(uv.Graph),uv.AreaGraph.prototype.setDefaults=function(a){return a.stepup=!1,this},uv.AreaGraph.prototype.drawHorizontalArea=function(a,b){var c=this,d=uv.util.getColorBand(c.config,b);c.axes.ver.scale.rangePoints([0,c.height()]),a.linefunc=d3.svg.line().x(function(a){return c.axes.hor.scale(a.value)}).y(function(a){return c.axes.ver.scale(a.name)+c.axes.ver.scale.rangeBand()/2}).interpolate(c.config.area.interpolation),a.areafunc=d3.svg.area().x0(c.axes.hor.scale(0)).x1(a.linefunc.x()).y(a.linefunc.y()).interpolate(c.config.area.interpolation),a.area=a.path.append("svg:path").classed(uv.constants.classes.areapath+b,!0).attr("d",a.areafunc).style("opacity",c.config.area.opacity).style("-moz-opacity",c.config.area.opacity).style("fill",d),a.line=a.path.append("svg:path").classed(uv.constants.classes.linepath+b,!0).attr("d",a.linefunc).style("stroke","white").style("fill","none"),a.path.selectAll("."+uv.constants.classes.dot).data(c.dataset[b]).enter().append("circle").classed(uv.constants.classes.dot,!0).attr("cx",a.linefunc.x()).attr("cy",a.linefunc.y()).attr("r",3.5).style("fill","white")},uv.AreaGraph.prototype.drawVerticalArea=function(a,b){var c=this,d=uv.util.getColorBand(c.config,b);c.axes.hor.scale.rangePoints([0,c.width()]),a.linefunc=d3.svg.line().x(function(a){return c.axes.hor.scale(a.name)+c.axes.hor.scale.rangeBand()/2}).y(function(a){return c.axes.ver.scale(a.value)}).interpolate(c.config.area.interpolation),a.areafunc=d3.svg.area().x(a.linefunc.x()).y0(a.linefunc.y()).y1(c.axes.ver.scale(0)).interpolate(c.config.area.interpolation),a.area=a.path.append("svg:path").classed(uv.constants.classes.areapath+b,!0).attr("d",a.areafunc).style("opacity",c.config.area.opacity).style("-moz-opacity",c.config.area.opacity).style("fill",d),a.line=a.path.append("svg:path").classed(uv.constants.classes.linepath+b,!0).attr("d",a.linefunc).style("stroke","white").style("fill","none"),a.path.selectAll("."+uv.constants.classes.dot).data(c.dataset[b]).enter().append("circle").classed(uv.constants.classes.dot,!0).attr("cx",a.linefunc.x()).attr("cy",a.linefunc.y()).attr("r",3.5).style("fill","white")},uv.BarGraph=function(a,b){var c=this;uv.Graph.call(c).setDefaults(a,b).init(a,b),c.bargroups={},c.axes["Horizontal"===c.config.graph.orientation?"ver":"hor"].scale.domain(c.labels);var d,e,f=c.categories.length;for(d=0;f>d;d+=1)e=c.categories[d],c.bargroups[e]=c.panel.append("g").classed("cg-"+uv.util.formatClassName(e),!0),c["draw"+c.config.graph.orientation+"Bars"](d);c.finalize()},uv.BarGraph.prototype=uv.util.extend(uv.Graph),uv.BarGraph.prototype.setDefaults=function(a){return a.stepup=!1,this},uv.BarGraph.prototype.drawHorizontalBars=function(a){var b=this,c=uv.util.getColorBand(this.config,a),d=b.categories.length,e=b.bargroups[b.categories[a]].selectAll("g").data(b.graphdef.dataset[b.categories[a]]).enter().append("g").classed("cge-"+uv.util.formatClassName(b.categories[a]),!0);e.append("rect").classed(uv.util.formatClassName(b.categories[a]),!0).classed("cr_"+uv.util.formatClassName(b.categories[a]),!0).attr("height",b.axes.ver.scale.rangeBand()/d).attr("x",0).attr("y",function(a){return b.axes.ver.scale(a.name)
}).style("stroke",b.config.bar.strokecolor).style("fill",c).transition().duration(b.config.effects.duration).delay(function(a,c){return c*b.config.effects.duration}).attr("width",function(a){return b.axes.hor.scale(a.value)}).call(uv.util.endAll,function(){d3.select(this.parentNode.parentNode).selectAll("rect").on("mouseover",uv.effects.bar.mouseover(b,a)),d3.select(this.parentNode.parentNode).selectAll("rect").on("mouseout",uv.effects.bar.mouseout(b,a))}),e.append("text").attr("y",function(a){return b.axes.ver.scale(a.name)+b.axes.ver.scale.rangeBand()/d/2}).attr("dx",4).attr("dy",".35em").attr("text-anchor","start").classed("cr_"+uv.util.formatClassName(b.categories[a]),!0).style("fill",b.config.label.showlabel?uv.util.getColorBand(b.config,a):"none").style("font-family",b.config.bar.fontfamily).style("font-size",b.config.bar.fontsize).style("font-weight",b.config.bar.fontweight).text(function(a){return String(a.value)}).transition().duration(b.config.effects.duration).delay(function(a,c){return c*b.config.effects.duration}).attr("x",function(a){return b.axes.hor.scale(a.value)}),e.append("svg:title").text(function(c,d){return b.categories[a]+" ["+b.labels[d]+"] : "+c.value}),b.bargroups[b.categories[a]].attr("transform","translate(0,"+a*b.axes.ver.scale.rangeBand()/d+")")},uv.BarGraph.prototype.drawVerticalBars=function(a){var b=this,c=uv.util.getColorBand(this.config,a),d=b.categories.length,e=b.bargroups[b.categories[a]].selectAll("g").data(b.graphdef.dataset[b.categories[a]]).enter().append("g").classed("cge-"+uv.util.formatClassName(b.categories[a]),!0);e.append("rect").classed(uv.util.formatClassName(b.categories[a]),!0).classed("cr_"+uv.util.formatClassName(b.categories[a]),!0).attr("height",0).attr("width",0).attr("x",function(a){return b.axes.hor.scale(a.name)}).attr("y",0).style("stroke",b.config.bar.strokecolor).style("fill",c).transition().duration(b.config.effects.duration).delay(a*b.config.effects.duration).attr("height",function(a){return b.height()-b.axes.ver.scale(a.value)}).attr("width",b.axes.hor.scale.rangeBand()/d).call(uv.util.endAll,function(){d3.select(this.parentNode.parentNode).selectAll("rect").on("mouseover",uv.effects.bar.mouseover(b,a)),d3.select(this.parentNode.parentNode).selectAll("rect").on("mouseout",uv.effects.bar.mouseout(b,a))}),e.append("text").attr("transform","scale(1,-1)").attr("x",function(a){return b.axes.hor.scale(a.name)+b.axes.hor.scale.rangeBand()/d/2}).attr("y",-10).attr("dx",0).attr("dy",".35em").attr("text-anchor","middle").classed("cr_"+uv.util.formatClassName(b.categories[a]),!0).style("fill",b.config.label.showlabel?uv.util.getColorBand(b.config,a):"none").style("font-family",b.config.bar.fontfamily).style("font-size",b.config.bar.fontsize).style("font-weight",b.config.bar.fontweight).text(function(a){return String(a.value)}).transition().duration(b.config.effects.duration).delay(a*b.config.effects.duration).attr("y",function(a){return-(b.height()-b.axes.ver.scale(a.value))-10}),e.append("svg:title").text(function(c,d){return b.categories[a]+" ["+b.labels[d]+"] : "+c.value}),b.bargroups[b.categories[a]].attr("transform","translate("+a*b.axes.hor.scale.rangeBand()/d+","+b.height()+") scale(1,-1)")},uv.DonutGraph=function(a,b){var c=this;uv.Graph.call(c).setDefaults(a,b).init(a,b),c.radius=2*Math.min(c.height(),c.width())/5,c.center={x:c.width()/2,y:c.height()/2},c.category=a.categories[0];var d=uv.util.getCategoryData(c.graphdef,[c.category]),e=d3.svg.arc().innerRadius(c.radius*c.config.donut.factor).outerRadius(c.radius),f=d3.layout.pie();c.panel.data(d),c.arcs=c.panel.selectAll("g.arc").data(f).enter().append("g").classed(uv.constants.classes.arc+uv.util.formatClassName(c.category),!0).attr("transform","translate("+c.center.x+","+c.center.y+")"),c.arcs.append("path").attr("d",e).style("fill",function(a,b){return uv.util.getColorBand(c.config,b)}).style("stroke",c.config.donut.strokecolor).style("stroke-width",c.config.donut.strokewidth).on("mouseover",uv.effects.donut.mouseover(c.center,e,c.config)).on("mouseout",uv.effects.donut.mouseout(c.center,c.config)),c.arcs.append("text").attr("transform",function(a){return"translate("+e.centroid(a)+")"}).attr("dy",".35em").attr("text-anchor","middle").style("fill",c.config.label.showlabel?c.config.donut.fontfill:"none").style("font-family",c.config.donut.fontfamily).style("font-size",c.config.donut.fontsize).style("font-weight",c.config.donut.fontweight).style("font-variant",c.config.donut.fontvariant).text(function(a){return String(a.value)}),c.arcs.append("svg:title").text(function(a,b){return c.labels[b]+" : "+a.value})},uv.DonutGraph.prototype=uv.util.extend(uv.Graph),uv.DonutGraph.prototype.setDefaults=function(a){return a.stepup=!1,this},uv.LineGraph=function(a,b){var c=this;uv.Graph.call(c).setDefaults(a,b).init(a,b),c.linegroups={},c.dataset=uv.util.getDataArray(c.graphdef);var d,e,f,g=c.categories.length,h=c.labels;for(c.axes["Horizontal"===c.config.graph.orientation?"ver":"hor"].scale.domain(h),f=0;g>f;f+=1)e=c.panel.append("g").classed("cg-"+uv.util.formatClassName(c.categories[f]),!0).append("g").classed("cge-"+uv.util.formatClassName(c.categories[f]),!0).datum(c.dataset[f]),d={path:e,func:void 0},c["draw"+c.config.graph.orientation+"Lines"](d,f),c.linegroups[c.categories[f]]=d;c.finalize()},uv.LineGraph.prototype=uv.util.extend(uv.Graph),uv.LineGraph.prototype.setDefaults=function(a,b){return a.stepup=!1,b.scale.ordinality=0,this},uv.LineGraph.prototype.drawHorizontalLines=function(a,b){var c=this,d=c.axes,e=(c.config,uv.util.getColorBand(c.config,b));return a.func=d3.svg.line().x(function(a){return d.hor.scale(a.value)}).y(function(a){return d.ver.scale(a.name)+d.ver.scale.rangeBand()/2}).interpolate(uv.config.line.interpolation),a.path.append("path").classed("cr_"+uv.util.formatClassName(c.categories[b]),!0).attr("d",a.func).style("fill","none").style("stroke",e).style("stroke-width",1.5).style("stroke-opacity",.01).transition().duration(3*c.config.effects.duration).delay(2*b*c.config.effects.duration).style("stroke-opacity",1).call(uv.util.endAll,function(){d3.select(this.parentNode.parentNode).selectAll("path").on("mouseover",uv.effects.line.mouseover(c,b)),d3.select(this.parentNode.parentNode).selectAll("path").on("mouseout",uv.effects.line.mouseout(c,b)),d3.select(this.parentNode.parentNode).selectAll("circle").on("mouseover",uv.effects.line.mouseover(c,b)),d3.select(this.parentNode.parentNode).selectAll("circle").on("mouseout",uv.effects.line.mouseout(c,b))}),a.path.selectAll("circle").data(c.dataset[b]).enter().append("circle").classed("cr_"+uv.util.formatClassName(c.categories[b]),!0).attr("cx",a.func.x()).attr("cy",a.func.y()).attr("r",3.5).style("fill",e).style("fill-opacity",.6).style("stroke",e).append("svg:title").text(function(a,d){return c.categories[b]+" ["+c.labels[d]+"]: "+a.value}),a.path.selectAll("text").data(c.dataset[b]).enter().append("text").attr("x",function(a){return d.hor.scale(a.value)}).attr("y",function(a){return d.ver.scale(a.name)+d.ver.scale.rangeBand()/2}).attr("dx",10).attr("dy",".35em").attr("text-anchor","start").classed("cr_"+uv.util.formatClassName(c.categories[b]),!0).style("fill",c.config.label.showlabel?uv.util.getColorBand(c.config,b):"none").style("font-family",c.config.bar.fontfamily).style("font-size",c.config.bar.fontsize).style("font-weight",c.config.bar.fontweight).text(function(a){return String(a.value)}),this},uv.LineGraph.prototype.drawVerticalLines=function(a,b){var c=this,d=c.axes,e=(c.config,uv.util.getColorBand(c.config,b));return a.func=d3.svg.line().x(function(a){return d.hor.scale(a.name)+d.hor.scale.rangeBand()/2}).y(function(a){return d.ver.scale(a.value)}).interpolate(uv.config.line.interpolation),a.path.append("path").attr("d",a.func).classed("cr_"+uv.util.formatClassName(c.categories[b]),!0).style("fill","none").style("stroke",e).style("stroke-width",1.5).style("stroke-opacity",.01).transition().duration(c.config.effects.duration).delay(2*b*c.config.effects.duration).style("stroke-opacity",1).call(uv.util.endAll,function(){d3.select(this.parentNode.parentNode).selectAll("path").on("mouseover",uv.effects.line.mouseover(c,b)),d3.select(this.parentNode.parentNode).selectAll("path").on("mouseout",uv.effects.line.mouseout(c,b)),d3.select(this.parentNode.parentNode).selectAll("circle").on("mouseover",uv.effects.line.mouseover(c,b)),d3.select(this.parentNode.parentNode).selectAll("circle").on("mouseout",uv.effects.line.mouseout(c,b))}),a.path.selectAll("circle").data(c.dataset[b]).enter().append("circle").attr("cx",a.func.x()).attr("cy",a.func.y()).attr("r",3.5).classed("cr_"+uv.util.formatClassName(c.categories[b]),!0).style("fill",e).style("fill-opacity",.2).style("stroke",e).append("svg:title").text(function(a,d){return c.categories[b]+" ["+c.labels[d]+"]: "+a.value}),a.path.selectAll("text").data(c.dataset[b]).enter().append("text").attr("x",function(a){return d.hor.scale(a.name)+d.hor.scale.rangeBand()/2}).attr("y",function(a){return d.ver.scale(a.value)-20}).attr("dx",0).attr("dy",".71em").attr("text-anchor","middle").classed("cr_"+uv.util.formatClassName(c.categories[b]),!0).style("fill",c.config.label.showlabel?uv.util.getColorBand(c.config,b):"none").style("font-family",c.config.bar.fontfamily).style("font-size",c.config.bar.fontsize).style("font-weight",c.config.bar.fontweight).text(function(a){return String(a.value)}),this},uv.PercentAreaGraph=function(a,b){var c=this;uv.Graph.call(c).setDefaults(a,b).init(a,b);var d=d3.layout.stack().offset("zero")(c.categories.map(function(b){return a.dataset[b].map(function(a){return{x:a.name,y:+a.value}})})),e=c.labels;c.categories,c.axes["Horizontal"===c.config.graph.orientation?"ver":"hor"].scale.domain(e),c.areagroup=c.panel.selectAll("g.areagroup").data(d).enter().append("g").attr("class",function(a,b){return d3.select(this).attr("class")?d3.select(this).attr("class")+("cge-"+uv.util.formatClassName(c.categories[b])):"cge-"+uv.util.formatClassName(c.categories[b])}),c["draw"+c.config.graph.orientation+"Area"](),c.finalize(!0)},uv.PercentAreaGraph.prototype=uv.util.extend(uv.Graph),uv.PercentAreaGraph.prototype.setDefaults=function(a){return a.stepup="percent",this},uv.PercentAreaGraph.prototype.drawHorizontalArea=function(){var a=this,b=a.axes,c=a.categories,d=a.config,e=uv.util.getSumUpArray(a.graphdef);b.ver.scale.rangePoints([0,a.height()]);for(var f=0;f<c.length;f+=1)uv.effects.area.mouseover(a,f),uv.effects.area.mouseout(a,f);a.areagroup.append("path").attr("class",function(a,b){return d3.select(this).attr("class")?d3.select(this).attr("class")+(uv.constants.classes.area+uv.util.formatClassName(c[b])):uv.constants.classes.area+uv.util.formatClassName(c[b])}).style("fill",function(a,b){return uv.util.getColorBand(d,b)}).attr("d",d3.svg.area().y(function(a){return b.ver.scale(a.x)+b.ver.scale.rangeBand()/2}).x0(function(a,c){return b.hor.scale(uv.util.getPercentage(a.y0,e[c]))}).x1(function(a,c){return b.hor.scale(uv.util.getPercentage(a.y0+a.y,e[c]))}).interpolate(a.config.area.interpolation)).on("mouseover",function(b,d){a.effects[c[d]].mouseover()}).on("mouseout",function(b,d){a.effects[c[d]].mouseout()}),a.areagroup.append("path").attr("class",function(a,b){return d3.select(this).attr("class")?d3.select(this).attr("class")+(uv.constants.classes.line+uv.util.formatClassName(c[b])):uv.constants.classes.line+uv.util.formatClassName(c[b])}).style("stroke","white").style("fill","none").style("stroke-width",2).attr("d",d3.svg.line().y(function(a){return b.ver.scale(a.x)+b.ver.scale.rangeBand()/2}).x(function(a,c){return b.hor.scale(uv.util.getPercentage(a.y0+a.y,e[c]))}).interpolate(a.config.area.interpolation))},uv.PercentAreaGraph.prototype.drawVerticalArea=function(){var a=this,b=a.axes,c=a.categories,d=a.config,e=uv.util.getSumUpArray(a.graphdef);b.hor.scale.rangePoints([0,a.width()]);for(var f=0;f<c.length;f+=1)uv.effects.area.mouseover(a,f),uv.effects.area.mouseout(a,f);a.areagroup.append("path").attr("class",function(a,b){return d3.select(this).attr("class")?d3.select(this).attr("class")+(uv.constants.classes.area+uv.util.formatClassName(c[b])):uv.constants.classes.area+uv.util.formatClassName(c[b])}).style("fill",function(a,b){return uv.util.getColorBand(d,b)}).attr("d",d3.svg.area().x(function(a){return b.hor.scale(a.x)+b.hor.scale.rangeBand()/2}).y0(function(a,c){return b.ver.scale(uv.util.getPercentage(a.y0,e[c]))}).y1(function(a,c){return b.ver.scale(uv.util.getPercentage(a.y0+a.y,e[c]))}).interpolate(a.config.area.interpolation)).on("mouseover",function(b,d){a.effects[c[d]].mouseover()}).on("mouseout",function(b,d){a.effects[c[d]].mouseout()}),a.areagroup.append("path").attr("class",function(a,b){return d3.select(this).attr("class")?d3.select(this).attr("class")+(uv.constants.classes.line+uv.util.formatClassName(c[b])):uv.constants.classes.line+uv.util.formatClassName(c[b])}).style("stroke","white").style("fill","none").style("stroke-width",2).attr("d",d3.svg.line().x(function(a){return b.hor.scale(a.x)+b.hor.scale.rangeBand()/2}).y(function(a,c){return b.ver.scale(uv.util.getPercentage(a.y0+a.y,e[c]))}).interpolate(a.config.area.interpolation))},uv.PercentBarGraph=function(a,b){var c=this;uv.Graph.call(c).setDefaults(a,b).init(a,b),c.bargroups=[];var d,e,f,g,h,i=c.labels,j=i.map(function(){return 0}),k=i.map(function(){return 0});for(c.axes["Horizontal"===c.config.graph.orientation?"ver":"hor"].scale.domain(i),f=0,g=c.categories.length;g>f;f+=1)h=uv.util.getColorBand(c.config,f),d=c.panel.append("g").classed("cg-"+c.categories[f],!0),e=d.selectAll("g").data(c.graphdef.dataset[c.categories[f]]).enter().append("g").classed("cge-"+uv.util.formatClassName(c.categories[f]),!0),c["draw"+uv.util.getPascalCasedName(c.config.graph.orientation)+"Bars"](e,j,k,f),"Vertical"===c.config.graph.orientation&&d.attr("transform","translate(0,"+2*c.height()+") scale(1,-1)"),c.bargroups.push(d);c.finalize()},uv.PercentBarGraph.prototype=uv.util.extend(uv.Graph),uv.PercentBarGraph.prototype.setDefaults=function(a,b){return a.stepup="percent",b.scale.ordinality=0,this},uv.PercentBarGraph.prototype.drawHorizontalBars=function(a,b,c,d){var e=this,f=this.axes,g=uv.util.getColorBand(this.config,d),h=(this.config,uv.util.getSumUpArray(this.graphdef));a.append("rect").attr("height",f.ver.scale.rangeBand()).attr("width",0).attr("x",function(a,c){var d=f.hor.scale(uv.util.getPercentage(b[c],h[c]));return b[c]+=a.value,d}).attr("y",function(a){return f.ver.scale(a.name)}).classed("cr_"+uv.util.formatClassName(e.categories[d]),!0).style("stroke","none").style("fill",g).transition().duration(uv.config.effects.duration).delay(d*uv.config.effects.duration).attr("width",function(a,b){return f.hor.scale(uv.util.getPercentage(a.value,h[b]))}).call(uv.util.endAll,function(){d3.select(this.parentNode.parentNode).selectAll("rect").on("mouseover",uv.effects.bar.mouseover(e,d,e.config.effects.textcolor)),d3.select(this.parentNode.parentNode).selectAll("rect").on("mouseout",uv.effects.bar.mouseout(e,d,e.config.effects.textcolor))}),a.append("text").attr("y",function(a){return f.ver.scale(a.name)+f.ver.scale.rangeBand()/2}).attr("dx",0).attr("dy",".35em").attr("text-anchor","end").classed("cr_"+uv.util.formatClassName(e.categories[d]),!0).style("fill",e.config.label.showlabel?e.config.effects.textcolor:"none").style("font-family",this.config.bar.fontfamily).style("font-size",this.config.bar.fontsize).style("font-weight",this.config.bar.fontweight).text(function(a,c){return f.hor.scale(uv.util.getPercentage(b[c],h[c]))>15?String(Math.round(uv.util.getPercentage(a.value,h[c]))):null}).transition().duration(uv.config.effects.duration).delay(d*uv.config.effects.duration).attr("x",function(a,b){return c[b]+=a.value,f.hor.scale(uv.util.getPercentage(c[b],h[b]))-5})},uv.PercentBarGraph.prototype.drawVerticalBars=function(a,b,c,d){var e=this,f=this.height(),g=this.axes,h=uv.util.getColorBand(this.config,d),i=(this.config,uv.util.getSumUpArray(this.graphdef));a.append("rect").attr("height",0).attr("width",g.hor.scale.rangeBand()).attr("x",function(a){return g.hor.scale(a.name)}).attr("y",function(a,c){var d=g.ver.scale(uv.util.getPercentage(b[c],i[c]));return b[c]-=a.value,d}).classed("cr_"+uv.util.formatClassName(e.categories[d]),!0).style("stroke","none").style("fill",h).transition().duration(uv.config.effects.duration).delay(d*uv.config.effects.duration).attr("height",function(a,b){return f-g.ver.scale(uv.util.getPercentage(a.value,i[b]))}).call(uv.util.endAll,function(){d3.select(this.parentNode.parentNode).selectAll("rect").on("mouseover",uv.effects.bar.mouseover(e,d,e.config.effects.textcolor)),d3.select(this.parentNode.parentNode).selectAll("rect").on("mouseout",uv.effects.bar.mouseout(e,d,e.config.effects.textcolor))}),a.append("text").attr("transform","scale(1,-1)").attr("x",function(a){return g.hor.scale(a.name)+g.hor.scale.rangeBand()/2}).attr("y",-f+5).attr("dy",".71em").attr("text-anchor","middle").classed("cr_"+uv.util.formatClassName(e.categories[d]),!0).style("fill",e.config.label.showlabel?e.config.effects.textcolor:"none").style("font-family",this.config.bar.fontfamily).style("font-size",this.config.bar.fontsize).style("font-weight",this.config.bar.fontweight).text(function(a,b){return f-g.ver.scale(uv.util.getPercentage(a.value,i[b]))>15?String(Math.round(uv.util.getPercentage(a.value,i[b]))):null}).transition().duration(uv.config.effects.duration).delay(d*uv.config.effects.duration).attr("y",function(a,b){return c[b]+=a.value,-(2*f-g.ver.scale(uv.util.getPercentage(c[b],i[b])))+5})},uv.PieGraph=function(a,b){var c=this;uv.Graph.call(c).setDefaults(a,b).init(a,b),c.radius=2*Math.min(c.height(),c.width())/5,c.center={x:c.width()/2,y:c.height()/2},c.category=a.categories[0];var d=uv.util.getCategoryData(c.graphdef,[c.category]),e=d3.svg.arc().innerRadius(0).outerRadius(c.radius),f=d3.layout.pie();c.panel.data(d),c.arcs=c.panel.selectAll("g.arc").data(f).enter().append("g").classed(uv.constants.classes.arc+uv.util.formatClassName(c.category),!0).attr("transform","translate("+c.center.x+","+c.center.y+")"),c.arcs.append("path").attr("d",e).style("fill",function(a,b){return uv.util.getColorBand(c.config,b)}).style("stroke",c.config.pie.strokecolor).style("stroke-width",c.config.pie.strokewidth).on("mouseover",uv.effects.pie.mouseover(c.center,e,c.config)).on("mouseout",uv.effects.pie.mouseout(c.center,c.config)),c.arcs.append("text").attr("transform",function(a){return"translate("+e.centroid(a)+")"}).attr("dy",".35em").attr("text-anchor","middle").style("fill",c.config.label.showlabel?c.config.donut.fontfill:"none").style("font-family",c.config.pie.fontfamily).style("font-size",c.config.pie.fontsize).style("font-weight",c.config.pie.fontweight).style("font-variant",c.config.pie.fontvariant).text(function(a){return String(a.value)}),c.arcs.append("svg:title").text(function(a,b){return c.labels[b]+" : "+a.value})},uv.PieGraph.prototype=uv.util.extend(uv.Graph),uv.PieGraph.prototype.setDefaults=function(a){return a.stepup=!1,this},uv.PolarAreaGraph=function(a,b){var c=this;uv.Graph.call(c).setDefaults(a,b).init(a,b),c.maxRadius=2*Math.min(c.height(),c.width())/5,c.center={x:c.width()/2,y:c.height()/2},c.category=c.categories[0];var d=uv.util.getCategoryData(c.graphdef,[c.category]),e=d3.layout.pie(),f=d[0].map(function(a){return d3.svg.arc().innerRadius(0).outerRadius(a*c.maxRadius/c.max())});c.panel.data(d),c.arcs=c.panel.selectAll("g.arc").data(e).enter().append("g").classed(uv.constants.classes.arc+uv.util.formatClassName(c.category),!0).attr("transform","translate("+c.center.x+","+c.center.y+")"),c.arcs.append("path").attr("d",f[0]).style("fill",function(a,b){return uv.util.getColorBand(c.config,b)}).style("stroke",c.config.pie.strokecolor).style("stroke-width",c.config.pie.strokewidth),c.arcs.append("text").attr("transform",function(a,b){return"translate("+f[b].centroid(a)+")"}).attr("dy",".35em").attr("text-anchor","middle").style("fill",c.config.pie.fontfill).style("font-family",c.config.pie.fontfamily).style("font-size",c.config.pie.fontsize).style("font-weight",c.config.pie.fontweight).style("font-variant",c.config.pie.fontvariant).text(function(a){return String(a.value)}),c.arcs.append("svg:title").text(function(a,b){return c.labels[b]+" : "+a.value})},uv.PolarAreaGraph.prototype=uv.util.extend(uv.Graph),uv.PolarAreaGraph.prototype.setDefaults=function(a){return a.stepup=!1,this},uv.StackedAreaGraph=function(a,b){var c=this;uv.Graph.call(c,a).setDefaults(a,b).init(a,b);var d=d3.layout.stack().offset(c.config.area.offset)(c.categories.map(function(b){return a.dataset[b].map(function(a){return{x:a.name,y:+a.value}})}));c.axes["Horizontal"===c.config.graph.orientation?"ver":"hor"].scale.domain(c.labels.map(function(a){return a})),c.areagroup=c.panel.append("g").selectAll("g").data(d).enter().append("g").attr("class",function(a,b){return d3.select(this).attr("class")?d3.select(this).attr("class")+("cge-"+uv.util.formatClassName(c.categories[b])):"cge-"+uv.util.formatClassName(c.categories[b])}),c["draw"+c.config.graph.orientation+"Area"](),c.finalize()},uv.StackedAreaGraph.prototype=uv.util.extend(uv.Graph),uv.StackedAreaGraph.prototype.setDefaults=function(a){return a.stepup=!0,this},uv.StackedAreaGraph.prototype.drawHorizontalArea=function(){var a=this,b=a.axes,c=a.categories,d=a.config;b.ver.scale.rangePoints([0,a.height()]);for(var e=0;e<c.length;e+=1)uv.effects.area.mouseover(a,e),uv.effects.area.mouseout(a,e);return a.areagroup.append("path").attr("class",function(a,b){return d3.select(this).attr("class")?d3.select(this).attr("class")+(uv.constants.classes.area+uv.util.formatClassName(c[b])):uv.constants.classes.area+uv.util.formatClassName(c[b])}).style("fill",function(a,b){return uv.util.getColorBand(d,b)}).attr("d",d3.svg.area().y(function(a){return b.ver.scale(a.x)+b.ver.scale.rangeBand()/2}).x0(function(a){return b.hor.scale(a.y0)}).x1(function(a){return b.hor.scale(a.y0+a.y)}).interpolate(a.config.area.interpolation)).on("mouseover",function(b,d){a.effects[c[d]].mouseover()}).on("mouseout",function(b,d){a.effects[c[d]].mouseout()}),a.areagroup.append("path").attr("class",function(a,b){return d3.select(this).attr("class")?d3.select(this).attr("class")+(uv.constants.classes.line+uv.util.formatClassName(c[b])):uv.constants.classes.line+uv.util.formatClassName(c[b])}).style("stroke","white").style("fill","none").style("stroke-width",2).attr("d",d3.svg.line().y(function(a){return b.ver.scale(a.x)+b.ver.scale.rangeBand()/2}).x(function(a){return b.hor.scale(a.y0+a.y)}).interpolate(a.config.area.interpolation)),a},uv.StackedAreaGraph.prototype.drawVerticalArea=function(){var a=this,b=a.axes,c=a.categories,d=a.config;b.hor.scale.rangePoints([0,a.width()]);for(var e=0;e<c.length;e+=1)uv.effects.area.mouseover(a,e),uv.effects.area.mouseout(a,e);return a.areagroup.append("path").attr("class",function(a,b){return d3.select(this).attr("class")?d3.select(this).attr("class")+(uv.constants.classes.area+uv.util.formatClassName(c[b])):uv.constants.classes.area+uv.util.formatClassName(c[b])}).style("fill",function(a,b){return uv.util.getColorBand(d,b)}).attr("d",d3.svg.area().x(function(a){return b.hor.scale(a.x)+b.hor.scale.rangeBand()/2}).y0(function(a){return b.ver.scale(a.y0)}).y1(function(a){return b.ver.scale(a.y0+a.y)}).interpolate(a.config.area.interpolation)).on("mouseover",function(b,d){a.effects[c[d]].mouseover()}).on("mouseout",function(b,d){a.effects[c[d]].mouseout()}),a.areagroup.append("path").attr("class",function(a,b){return d3.select(this).attr("class")?d3.select(this).attr("class")+(uv.constants.classes.line+uv.util.formatClassName(c[b])):uv.constants.classes.line+uv.util.formatClassName(c[b])}).style("stroke","white").style("fill","none").style("stroke-width",2).attr("d",d3.svg.line().x(function(a){return b.hor.scale(a.x)+b.hor.scale.rangeBand()/2}).y(function(a){return b.ver.scale(a.y0+a.y)}).interpolate(a.config.area.interpolation)),a},uv.StackedBarGraph=function(a,b){var c=this;uv.Graph.call(c).setDefaults(a,b).init(a,b),c.bargroups={};var d,e,f=c.labels,g=f.map(function(){return 0}),h=f.map(function(){return 0});for(c.axes["Horizontal"===c.config.graph.orientation?"ver":"hor"].scale.domain(f),d=0,e=c.categories.length;e>d;d+=1)c.bargroups[c.categories[d]]=c.panel.append("g").classed("cg-"+uv.util.formatClassName(c.categories[d]),!0),c["draw"+c.config.graph.orientation+"Bars"](d,g,h);c.finalize()},uv.StackedBarGraph.prototype=uv.util.extend(uv.Graph),uv.StackedBarGraph.prototype.setDefaults=function(a){return a.stepup=!0,this},uv.StackedBarGraph.prototype.drawHorizontalBars=function(a,b,c){var d=this,e=this.axes,f=uv.util.getColorBand(this.config,a),g=this.config,h=this.bargroups[this.categories[a]],i=h.selectAll("g").data(this.graphdef.dataset[d.categories[a]]).enter().append("g").classed("cge-"+uv.util.formatClassName(d.categories[a]),!0);i.append("rect").attr("height",e.ver.scale.rangeBand()).attr("width",0).attr("x",function(a,c){var d=e.hor.scale(b[c]);return b[c]+=a.value,d}).attr("y",function(a){return e.ver.scale(a.name)}).classed("cr_"+uv.util.formatClassName(d.categories[a]),!0).style("stroke","none").style("fill",f).transition().duration(uv.config.effects.duration).delay(a*uv.config.effects.duration).attr("width",function(a,c){return e.hor.scale(b[c])-e.hor.scale(b[c]-a.value)}).each("end",function(){d3.select(this).on("mouseover",uv.effects.bar.mouseover(d,a,d.config.effects.textcolor)),d3.select(this).on("mouseout",uv.effects.bar.mouseout(d,a,d.config.effects.textcolor))}),i.append("text").attr("y",function(a){return e.ver.scale(a.name)+e.ver.scale.rangeBand()/2}).attr("dx",0).attr("dy",".35em").attr("text-anchor","end").classed("cr_"+uv.util.formatClassName(d.categories[a]),!0).style("fill",d.config.label.showlabel?d.config.effects.textcolor:"none").style("font-family",g.bar.fontfamily).style("font-size",g.bar.fontsize).style("font-weight",g.bar.fontweight).text(function(a){return e.hor.scale(a.value)>15?String(a.value):null}).transition().duration(uv.config.effects.duration).delay(a*uv.config.effects.duration).attr("x",function(a,b){return c[b]+=a.value,e.hor.scale(c[b])-5}),i.append("svg:title").text(function(b,c){return d.categories[a]+" ["+d.labels[c]+"] : "+b.value})},uv.StackedBarGraph.prototype.drawVerticalBars=function(a,b,c){var d=this,e=this.height(),f=this.axes,g=uv.util.getColorBand(this.config,a),h=this.config,i=this.bargroups[d.categories[a]],j=i.selectAll("g").data(this.graphdef.dataset[d.categories[a]]).enter().append("g").classed("cge-"+uv.util.formatClassName(d.categories[a]),!0);j.append("rect").attr("height",0).attr("width",f.hor.scale.rangeBand()).attr("x",function(a){return f.hor.scale(a.name)}).attr("y",function(a,c){var d=f.ver.scale(b[c]);return b[c]-=a.value,d}).classed("cr_"+uv.util.formatClassName(d.categories[a]),!0).style("stroke","none").style("fill",g).transition().duration(uv.config.effects.duration).delay(a*uv.config.effects.duration).attr("height",function(a,c){return-(f.ver.scale(-b[c])-f.ver.scale(-b[c]-a.value))}).each("end",function(){d3.select(this).on("mouseover",uv.effects.bar.mouseover(d,a,d.config.effects.textcolor)),d3.select(this).on("mouseout",uv.effects.bar.mouseout(d,a,d.config.effects.textcolor))}),j.append("text").attr("transform","scale(1,-1)").attr("x",function(a){return f.hor.scale(a.name)+f.hor.scale.rangeBand()/2}).attr("y",-e+5).attr("dy",".71em").attr("text-anchor","middle").classed("cr_"+uv.util.formatClassName(d.categories[a]),!0).style("fill",d.config.label.showlabel?d.config.effects.textcolor:"none").style("font-family",h.bar.fontfamily).style("font-size",h.bar.fontsize).style("font-weight",h.bar.fontweight).text(function(a){return e-f.ver.scale(a.value)>15?String(a.value):null}).transition().duration(uv.config.effects.duration).delay(a*uv.config.effects.duration).attr("y",function(a,b){return c[b]+=a.value,-(2*e-f.ver.scale(c[b]))+5}),j.append("svg:title").text(function(b,c){return d.categories[a]+" ["+d.labels[c]+"] : "+b.value}),i.attr("transform","translate(0,"+2*this.height()+") scale(1,-1)")},uv.StepUpBarGraph=function(a,b){var c=this;uv.Graph.call(c).setDefaults(a,b).init(a,b),this.bargroups={};var d,e=c.categories.length,f=c.labels.map(function(){return 0}),g=c.labels.map(function(){return 0});for(c.axes["Horizontal"===this.config.graph.orientation?"ver":"hor"].scale.domain(this.labels),d=0;e>d;d+=1)c.bargroups[c.categories[d]]=this.panel.append("g").classed("cg-"+uv.util.formatClassName(c.categories[d]),!0),c["draw"+c.config.graph.orientation+"Bars"](d,f,g);c.finalize()},uv.StepUpBarGraph.prototype=uv.util.extend(uv.Graph),uv.StepUpBarGraph.prototype.setDefaults=function(a){return a.stepup=!0,this},uv.StepUpBarGraph.prototype.drawHorizontalBars=function(a,b,c){var d=this,e=d.categories.length,f=uv.util.getColorBand(d.config,a),g=d.bargroups[d.categories[a]],h=g.selectAll("g").data(d.graphdef.dataset[d.categories[a]]).enter().append("g").classed("cge-"+uv.util.formatClassName(d.categories[a]),!0);h.append("rect").attr("height",d.axes.ver.scale.rangeBand()/e).attr("width",0).attr("x",function(a,c){var e=d.axes.hor.scale(b[c]);return b[c]+=a.value,e}).attr("y",function(a){return d.axes.ver.scale(a.name)}).classed("cr_"+uv.util.formatClassName(d.categories[a]),!0).style("stroke","none").style("fill",f).transition().duration(d.config.effects.duration).delay(a*d.config.effects.duration).attr("width",function(a,c){return d.axes.hor.scale(b[c])-d.axes.hor.scale(b[c]-a.value)}).call(uv.util.endAll,function(){d3.select(this.parentNode.parentNode).selectAll("rect").on("mouseover",uv.effects.bar.mouseover(d,a)),d3.select(this.parentNode.parentNode).selectAll("rect").on("mouseout",uv.effects.bar.mouseout(d,a))}),h.append("text").attr("y",function(a){return d.axes.ver.scale(a.name)+d.axes.ver.scale.rangeBand()/e/2}).attr("dx",4).attr("dy",".35em").attr("text-anchor","start").classed("cr_"+uv.util.formatClassName(d.categories[a]),!0).style("fill",d.config.label.showlabel?uv.util.getColorBand(d.config,a):"none").style("font-family",d.config.bar.fontfamily).style("font-size",d.config.bar.fontsize).style("font-weight",d.config.bar.fontweight).text(function(a){return String(a.value)}).transition().duration(d.config.effects.duration).delay(a*d.config.effects.duration).attr("x",function(a,b){return c[b]+=a.value,d.axes.hor.scale(c[b])}),h.append("svg:title").text(function(b,c){return d.categories[a]+" ["+d.labels[c]+"] : "+b.value}),g.attr("transform","translate(0,"+a*d.axes.ver.scale.rangeBand()/e+")")},uv.StepUpBarGraph.prototype.drawVerticalBars=function(a,b,c){var d=this,e=d.categories.length,f=uv.util.getColorBand(d.config,a),g=d.bargroups[d.categories[a]],h=g.selectAll("g").data(d.graphdef.dataset[d.categories[a]]).enter().append("g").classed("cge-"+uv.util.formatClassName(d.categories[a]),!0);h.append("rect").attr("height",0).attr("width",d.axes.hor.scale.rangeBand()/e).attr("x",function(a){return d.axes.hor.scale(a.name)}).attr("y",function(a,c){var e=d.axes.ver.scale(b[c]);return b[c]-=a.value,e}).classed("cr_"+uv.util.formatClassName(d.categories[a]),!0).style("stroke","none").style("fill",f).transition().duration(d.config.effects.duration).delay(a*d.config.effects.duration).attr("height",function(a,c){return-(d.axes.ver.scale(-b[c])-d.axes.ver.scale(-b[c]-a.value))}).call(uv.util.endAll,function(){d3.select(this.parentNode.parentNode).selectAll("rect").on("mouseover",uv.effects.bar.mouseover(d,a)),d3.select(this.parentNode.parentNode).selectAll("rect").on("mouseout",uv.effects.bar.mouseout(d,a))}),h.append("text").attr("transform","scale(1,-1)").attr("x",function(a){return d.axes.hor.scale(a.name)+d.axes.hor.scale.rangeBand()/e/2}).attr("y",-d.height()-10).attr("dy",".71em").attr("text-anchor","middle").classed("cr_"+uv.util.formatClassName(d.categories[a]),!0).style("fill",d.config.label.showlabel?uv.util.getColorBand(d.config,a):"none").style("font-family",d.config.bar.fontfamily).style("font-size",d.config.bar.fontsize).style("font-weight",d.config.bar.fontweight).text(function(a){return String(a.value)
}).transition().duration(d.config.effects.duration).delay(a*d.config.effects.duration).attr("y",function(a,b){return c[b]+=a.value,-(2*d.height()-d.axes.ver.scale(c[b]))-10}),h.append("svg:title").text(function(b,c){return d.categories[a]+" ["+d.labels[c]+"] : "+b.value}),g.attr("transform","translate("+a*d.axes.hor.scale.rangeBand()/e+","+2*d.height()+") scale(1,-1)")},uv.WaterfallGraph=function(a,b){var c=this;uv.Graph.call(c).setDefaults(a,b).init(a,b),c.bargroups={},c.axes["Horizontal"===c.config.graph.orientation?"ver":"hor"].scale.domain(c.labels);var d;c.categories.length,d=c.categories[0],c.bargroups[d]=c.panel.append("g").classed("cg-"+uv.util.formatClassName(d),!0),c["draw"+c.config.graph.orientation+"Bars"](0),c.finalize()},uv.WaterfallGraph.prototype=uv.util.extend(uv.Graph),uv.WaterfallGraph.prototype.setDefaults=function(a){return a.stepup="waterfall",this},uv.WaterfallGraph.prototype.drawHorizontalBars=function(a){var b=this,c=b.categories.length,d=uv.util.getColorBand(b.config,a),e=b.bargroups[b.categories[a]],f=0,g=0,h=e.selectAll("g").data(b.graphdef.dataset[b.categories[a]]).enter().append("g").classed("cge-"+uv.util.formatClassName(b.categories[a]),!0);h.append("rect").attr("height",b.axes.ver.scale.rangeBand()/c-2).attr("width",0).attr("x",function(a){var c=a.value<0?f+a.value:f;return f+=a.value,b.axes.hor.scale(c)}).attr("y",function(a){return b.axes.ver.scale(a.name)}).classed("cr_"+uv.util.formatClassName(b.categories[a]),!0).style("stroke","none").style("fill",d).transition().duration(b.config.effects.duration).delay(a*b.config.effects.duration).attr("width",function(a){return b.axes.hor.scale(Math.abs(a.value))}).call(uv.util.endAll,function(){d3.select(this.parentNode.parentNode).selectAll("rect").on("mouseover",uv.effects.bar.mouseover(b,a)),d3.select(this.parentNode.parentNode).selectAll("rect").on("mouseout",uv.effects.bar.mouseout(b,a))}),h.append("text").attr("y",function(a){return b.axes.ver.scale(a.name)+b.axes.ver.scale.rangeBand()/c/2}).attr("dx",4).attr("dy",".35em").attr("text-anchor","start").classed("cr_"+uv.util.formatClassName(b.categories[a]),!0).style("fill",b.config.label.showlabel?uv.util.getColorBand(b.config,a):"none").style("font-family",b.config.bar.fontfamily).style("font-size",b.config.bar.fontsize).style("font-weight",b.config.bar.fontweight).text(function(a){return String(a.value)}).transition().duration(b.config.effects.duration).delay(a*b.config.effects.duration).attr("x",function(a){var c=a.value<0?g:g+a.value;return g+=a.value,b.axes.hor.scale(c)}),h.append("svg:title").text(function(c,d){return b.categories[a]+" ["+b.labels[d]+"] : "+c.value}),e.attr("transform","translate(0,"+a*b.axes.ver.scale.rangeBand()/c+")")},uv.WaterfallGraph.prototype.drawVerticalBars=function(a){var b=this,c=uv.util.getColorBand(this.config,a),d=b.categories.length,e=0,f=0,g=b.bargroups[b.categories[a]].selectAll("g").data(b.graphdef.dataset[b.categories[a]]).enter().append("g").classed("cge-"+uv.util.formatClassName(b.categories[a]),!0);g.append("rect").classed("cr_"+uv.util.formatClassName(b.categories[a]),!0).attr("height",0).attr("width",0).attr("x",function(a){return b.axes.hor.scale(a.name)}).attr("y",function(a){var c=a.value<0?e+a.value:e;return e+=a.value,b.height()-b.axes.ver.scale(c)}).style("stroke",b.config.bar.strokecolor).style("fill",c).transition().duration(b.config.effects.duration).delay(a*b.config.effects.duration).attr("height",function(a){return b.height()-b.axes.ver.scale(Math.abs(a.value))}).attr("width",b.axes.hor.scale.rangeBand()/d-2).call(uv.util.endAll,function(){d3.select(this.parentNode.parentNode).selectAll("rect").on("mouseover",uv.effects.bar.mouseover(b,a)),d3.select(this.parentNode.parentNode).selectAll("rect").on("mouseout",uv.effects.bar.mouseout(b,a))}),g.append("text").attr("transform","scale(1,-1)").attr("x",function(a){return b.axes.hor.scale(a.name)+b.axes.hor.scale.rangeBand()/d/2}).attr("y",-10).attr("dx",0).attr("dy",".35em").attr("text-anchor","middle").classed("cr_"+uv.util.formatClassName(b.categories[a]),!0).style("fill",b.config.label.showlabel?uv.util.getColorBand(b.config,a):"none").style("font-family",b.config.bar.fontfamily).style("font-size",b.config.bar.fontsize).style("font-weight",b.config.bar.fontweight).text(function(a){return String(a.value)}).transition().duration(b.config.effects.duration).delay(a*b.config.effects.duration).attr("y",function(a){f+=a.value;var c=a.value<0?f-a.value:f;return-(b.height()-b.axes.ver.scale(c))-10}),g.append("svg:title").text(function(c,d){return b.categories[a]+" ["+b.labels[d]+"] : "+c.value}),b.bargroups[b.categories[a]].attr("transform","translate("+a*b.axes.hor.scale.rangeBand()/d+","+b.height()+") scale(1,-1)")},uv.Table=function(){this.caption=void 0,this.position=void 0,this.graphdef=void 0,this.table=void 0,this.header=void 0,this.body=void 0,this.bodyrows={}},uv.Table.prototype.init=function(a,b){this.graphdef=a,this.config=$.extend(!0,{},b),this.position=this.config.meta.pos||"body",this.table=d3.select(this.position).append("table").classed(this.config.table.tableclass,!0),this.header=this.table.append("thead").classed(this.config.table.headerclass,!0),this.body=this.table.append("tbody").classed(this.config.table.bodyclass,!0),this.footer=this.table.append("tfoot").classed(this.config.table.footerclass,!0)},uv.Table.prototype.finalize=function(){},uv.TableGraph=function(a,b){uv.Table.apply(this,[a]),this.init(a,b),"Horizontal"===this.config.graph.orientation?this.setHorTable():this.setVerTable(),this.finalize()},uv.TableGraph.prototype=uv.util.extend(uv.Table),uv.TableGraph.prototype.setHorTable=function(){var a=this.graphdef.categories,b=uv.util.getTabularArray(this.graphdef);a.unshift(""),this.header.append("tr").selectAll("td").data(a).enter().append("td").text(function(a){return a}),a.shift(),this.bodyrows=this.body.selectAll("tr").data(b).enter().append("tr"),this.bodyrows.selectAll("td").data(function(a,c){return b[c]}).enter().append("td").attr("class",function(a,b){var c=0===b?"chart3rtablelabel":"chart3rtabledata";return d3.select(this).attr("class")+c}).text(function(a){return a})},uv.TableGraph.prototype.setVerTable=function(){var a=uv.util.getLabelArray(this.graphdef),b=this.graphdef.dataset;a.unshift(""),this.header.append("tr").selectAll("td").data(a).enter().append("td").text(function(a){return a}),a.shift(),this.bodyrows=this.body.selectAll("tr").data(this.graphdef.categories).enter().append("tr"),this.bodyrows.selectAll("td").data(function(a){var c,d,e=[];for(e.push(a),c=0,d=b[a].length;d>c;c+=1)e.push(b[a][c].value);return e}).enter().append("td").attr("class",function(a,b){var c=0===b?"chart3rtablelabel":"chart3rtabledata";return d3.select(this).attr("class")+c}).text(function(a){return a})};